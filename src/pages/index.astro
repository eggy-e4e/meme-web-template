---
import Layout from '../layouts/Layout.astro';
import { Twitter, Copy } from 'lucide-astro';
import config from '../config/site.json';
import { getColorPalette, generateCSSVariables } from '../utils/colorPalettes.js';

// Get the selected color palette
const palette = getColorPalette(config.colorPalette);
const cssVariables = generateCSSVariables(palette);
---

<Layout title={config.token.name} description={config.token.tagline}>
  <!-- Dynamic Color Palette CSS -->
  <style set:html={cssVariables}></style>

  <!-- Header -->
  <header class="fixed top-0 w-full z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <!-- Logo/Mascot -->
        <div class="flex items-center space-x-3">
          <img
            src={config.token.mascotImage}
            alt={config.token.name}
            class="w-10 h-10 rounded-full object-cover border-2"
            style="border-color: var(--color-primary);"
          />
          <span class="text-xl font-bold text-white">{config.token.name}</span>
        </div>
        
        <!-- Social Icons -->
        <div class="flex items-center space-x-4">
          <a
            href={config.social.twitter}
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-400 transition-colors"
            style="color: var(--color-text); opacity: 0.7;"
            onmouseover="this.style.color = 'var(--color-primary)'; this.style.opacity = '1';"
            onmouseout="this.style.color = 'var(--color-text)'; this.style.opacity = '0.7';"
            aria-label="Follow on X (Twitter)"
          >
            <Twitter size={20} />
          </a>
          <!-- Telegram - commented out for now -->
          <!--
          <a
            href={config.social.telegram}
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-400 hover:text-blue-500 transition-colors"
            aria-label="Join Telegram"
          >
            <MessageCircle size={20} />
          </a>
          -->
          <!-- Discord - commented out for now -->
          <!--
          <a
            href={config.social.discord}
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-400 hover:text-indigo-400 transition-colors"
            aria-label="Join Discord"
          >
            <Users size={20} />
          </a>
          -->
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <main class="pt-16 min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <!-- Mascot Image -->
      <figure class="mb-8">
        <img
          src={config.token.mascotImage}
          alt={`${config.token.name} mascot - viral meme coin logo`}
          width="200"
          height="200"
          class="w-48 h-48 sm:w-64 sm:h-64 mx-auto rounded-full object-cover shadow-2xl border-4 animate-pulse"
          style="border-color: var(--color-primary);"
          loading="eager"
        />
      </figure>
      
      <!-- Token Name -->
      <h1 class="text-4xl sm:text-5xl lg:text-6xl font-black text-white mb-4 tracking-tight">
        {config.token.name}
      </h1>
      
      <!-- Tagline -->
      <p class="text-xl sm:text-2xl lg:text-3xl text-gray-300 mb-6 font-medium">
        {config.token.tagline}
      </p>
      
      <!-- Contract Address - MAIN FOCAL POINT -->
      <section class="bg-gray-800 rounded-2xl p-8 mb-6 border-2 shadow-2xl" style="border-color: var(--color-primary);" aria-labelledby="contract-heading">
        <h2 id="contract-heading" class="text-2xl font-bold mb-4" style="color: var(--color-primary);">CONTRACT ADDRESS</h2>
        <div class="flex items-center justify-center gap-3">
          <code
            class="text-lg sm:text-xl font-mono text-white bg-gray-900 px-6 py-4 rounded-lg border border-gray-700 break-all flex-1 max-w-md"
            aria-label={`Contract address: ${config.token.contractAddress}`}
          >
            {config.token.contractAddress}
          </code>
          <button
            onclick={`copyToClipboard('${config.token.contractAddress}')`}
            class="transition-colors p-2"
            style="color: var(--color-primary);"
            onmouseover="this.style.color = 'var(--color-hover)';"
            onmouseout="this.style.color = 'var(--color-primary)';"
            aria-label="Copy contract address to clipboard"
            title="Copy to clipboard"
          >
            <Copy size={24} />
          </button>
        </div>
      </section>
      
      <!-- Buy CTA -->
      <a
        href={config.pumpFun.buyUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-block text-white font-black text-2xl py-6 px-12 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-2xl"
        style={`background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));`}
        onmouseover={`this.style.background = 'linear-gradient(135deg, var(--color-hover), var(--color-accent))';`}
        onmouseout={`this.style.background = 'linear-gradient(135deg, var(--color-primary), var(--color-secondary))';`}
      >
        ðŸš€ BUY ON PUMP.FUN ðŸš€
      </a>
    </div>
  </main>

  <!-- Minimal Footer -->
  <footer class="bg-gray-800 border-t border-gray-700 py-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col sm:flex-row justify-between items-center">
        <p class="text-gray-400 text-sm mb-4 sm:mb-0">
          Â© 2024 {config.token.name}. All rights reserved.
        </p>
        
        <!-- Social Links -->
        <div class="flex items-center space-x-4">
          <a
            href={config.social.twitter}
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-400 transition-colors"
            style="color: var(--color-text); opacity: 0.7;"
            onmouseover="this.style.color = 'var(--color-primary)'; this.style.opacity = '1';"
            onmouseout="this.style.color = 'var(--color-text)'; this.style.opacity = '0.7';"
            aria-label="Follow on X (Twitter)"
          >
            <Twitter size={18} />
          </a>
          <!-- Telegram - commented out for now -->
          <!--
          <a
            href={config.social.telegram}
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-400 hover:text-blue-500 transition-colors"
            aria-label="Join Telegram"
          >
            <MessageCircle size={18} />
          </a>
          -->
          <!-- Discord - commented out for now -->
          <!--
          <a
            href={config.social.discord}
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-400 hover:text-indigo-400 transition-colors"
            aria-label="Join Discord"
          >
            <Users size={18} />
          </a>
          -->
        </div>
      </div>
    </div>
  </footer>
</Layout>
